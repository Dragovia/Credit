<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Login</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 0; background: linear-gradient(135deg,#eff6ff,#eef2ff); min-height: 100vh; display: grid; place-items: center; }
        .card { background: #fff; width: 100%; max-width: 420px; padding: 24px; border-radius: 14px; box-shadow: 0 10px 30px rgba(2,12,27,0.08); border: 1px solid #e5e7eb; }
        h1 { margin: 0 0 8px; font-size: 22px; color: #0b2a5b; }
        p { margin: 0 0 20px; color: #6b7280; }
        label { display: block; font-size: 12px; color: #4b5563; margin-top: 10px; }
        input { width: 100%; padding: 11px 12px; border: 1px solid #d1d5db; border-radius: 10px; margin-top: 6px; font-size: 14px; }
        button, a.button { margin-top: 14px; background: #1f6feb; color: #fff; border: 0; padding: 10px 14px; border-radius: 10px; cursor: pointer; width: 100%; text-decoration: none; text-align: center; display: inline-block; }
        button:hover, a.button:hover { background: #1858bd; }
        .row { display: flex; gap: 10px; margin-top: 10px; }
        .secondary { background: #fff; color: #1f6feb; border: 1px solid #cfe0ff; }
        .secondary:hover { background: #f5f9ff; }
    </style>
    {% if repo_url %}<link rel="preconnect" href="{{ repo_url }}">{% endif %}
    <link rel="preconnect" href="https://www.gstatic.com">
    <link rel="preconnect" href="https://www.googleapis.com">
</head>
<body>
<div class="card">
    <h1>Sign In</h1>
    <p>Use your Firebase email and password.</p>
    <label>Email</label>
    <input id="email" type="email" placeholder="you@example.com" />
    <label>Password</label>
    <input id="password" type="password" placeholder="••••••••" />
    <button id="login">Login</button>
</div>
<script type="module">
    import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-app.js';
    import { getAuth, signInWithEmailAndPassword } from 'https://www.gstatic.com/firebasejs/10.13.1/firebase-auth.js';

    const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
        projectId: "YOUR_PROJECT_ID"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    document.getElementById('login').addEventListener('click', async () => {
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        try {
            const cred = await signInWithEmailAndPassword(auth, email, password);
            const idToken = await cred.user.getIdToken();
            const form = document.createElement('form');
            form.method = 'POST';
            form.action = '/sessionLogin';
            const input = document.createElement('input');
            input.type = 'hidden';
            input.name = 'idToken';
            input.value = idToken;
            form.appendChild(input);
            document.body.appendChild(form);
            form.submit();
        } catch (e) {
            alert(e.message);
        }
    });
</script>
</body>
</html>
